<div ng-cloak ng-controller="ApplicationDeploySettings" layout-fill>
    <div cg-busy="{promise:loadingLayer,minDuration:500}" layout="column" layout-fill>
        <md-toolbar class="content-toolbar">
            <div class="md-toolbar-tools">应用部署设置</div>
        </md-toolbar>
        <md-content class="md-padding" flex layout="column">
            <div>
                <h3>禁止部署时间设置</h3>
                <table class="table" style="width: 60%">
                    <thead>
                    <tr>
                        <th>日期</th>
                        <th>开始时间</th>
                        <th>结束时间</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="weekday in weekdays">
                        <td><label>{{weekdayDict[weekday.name]}}</label></td>
                        <td>
                            <md-input-container>
                                <md-select ng-model="weekday.startHour">
                                    <md-option ng-repeat="hour in hours track by $index" ng-value="hour">{{hour}}</md-option>
                                </md-select>
                            </md-input-container>
                            <span>:</span>
                            <md-input-container>
                                <md-select ng-model="weekday.startMinute">
                                    <md-option ng-repeat="minute in minAndSecArr track by $index" ng-value="minute">{{minute}}</md-option>
                                </md-select>
                            </md-input-container>
                            <span>:</span>
                            <md-input-container>
                                <md-select ng-model="weekday.startSecond">
                                    <md-option ng-repeat="second in minAndSecArr track by $index" ng-value="second">{{second}}</md-option>
                                </md-select>
                            </md-input-container>
                        </td>
                        <td>
                            <md-input-container>
                                <md-select ng-model="weekday.endHour">
                                    <md-option ng-repeat="hour in hours track by $index" ng-value="hour">{{hour}}</md-option>
                                </md-select>
                            </md-input-container>
                            <span>:</span>
                            <md-input-container>
                                <md-select ng-model="weekday.endMinute">
                                    <md-option ng-repeat="minute in minAndSecArr track by $index" ng-value="minute">{{minute}}</md-option>
                                </md-select>
                            </md-input-container>
                            <span>:</span>
                            <md-input-container>
                                <md-select ng-model="weekday.endSecond">
                                    <md-option ng-repeat="second in minAndSecArr track by $index" ng-value="second">{{second}}</md-option>
                                </md-select>
                            </md-input-container>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div>
                <h3>例外日期设置</h3>
                <md-input-container>
                    <md-chips md-removable="true" md-transform-chip="$chip" ng-model="expectedDates">
                        <md-chip-template>
                            <span>
                                <em>{{$chip.date | date:'yyyy-MM-dd'}}</em>
                            </span>
                        </md-chip-template>
                    </md-chips>
                </md-input-container>
                <md-calendar ng-model="selectedDate"></md-calendar>
            </div>
            <div layout="row" has-permissions="APPLICATION_DEPLOY_SETTINGS:READ+UPDATE">
                <md-input-container>
                    <md-button ng-click="addExpectedDate()" class="md-primary md-raised">
                        添加日期
                    </md-button>
                </md-input-container>
                <md-input-container>
                    <md-button ng-click="saveStrategy()" class="md-raised md-primary">
                        保存设置
                    </md-button>
                </md-input-container>
            </div>
        </md-content>
    </div>
</div>